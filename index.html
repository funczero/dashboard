<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Punishment ‚Äî Alternativa</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0d12;
      --panel:#0f1720;
      --card:#11131a;
      --accent:#ff4b4b;
      --accent-2:#ff8a8a;
      --muted:#b6b8bf;
      --glass: rgba(255,255,255,0.03);
      --success:#43b581;
      --danger:#f04747;
      --warn:#f6b24a;
      --radius:16px;
      --max-width:980px;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#071018 0%,var(--bg) 60%);color:#fff;-webkit-font-smoothing:antialiased}
    .stage{display:flex;align-items:center;justify-content:center;padding:28px 18px;min-height:100vh}

    .shell{
      width:100%;max-width:var(--max-width);border-radius:20px;padding:22px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border:1px solid rgba(255,255,255,0.04);box-shadow:0 12px 40px rgba(2,6,23,0.6);position:relative;overflow:hidden;
    }

    /* Header */
    .header{
      display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap;
    }
    .brand{display:flex;gap:14px;align-items:center}
    .logo{
      width:72px;height:72px;border-radius:14px;overflow:hidden;border:1px solid rgba(255,255,255,0.04);background:linear-gradient(135deg,#0b0f14,#12151a);display:flex;align-items:center;justify-content:center;
    }
    .logo img{width:100%;height:100%;object-fit:cover;display:block}
    .title-wrap{display:flex;flex-direction:column}
    h1{font-size:1.7rem;margin:0;color:var(--accent);font-weight:800;letter-spacing:-0.6px}
    .subtitle{color:var(--muted);font-size:0.95rem;margin-top:6px;max-width:560px}

    .cta-row{display:flex;gap:10px;align-items:center}
    .btn{
      display:inline-flex;align-items:center;gap:10px;padding:10px 16px;border-radius:12px;font-weight:700;text-decoration:none;cursor:pointer;border:1px solid transparent;transition:transform .12s ease, box-shadow .12s ease;
    }
    .btn:active{transform:translateY(1px)}
    .btn-primary{background:linear-gradient(180deg,var(--accent),var(--accent-2));color:#fff;box-shadow:0 10px 30px rgba(255,75,75,0.12)}
    .btn-outline{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04)}

    /* Layout */
    .layout{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:18px}
    @media (max-width:920px){.layout{grid-template-columns:1fr} .cta-row{width:100%;justify-content:flex-end}}

    /* Left panel */
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border-radius:14px;padding:18px;border:1px solid rgba(255,255,255,0.03);
    }

    .status-block{display:flex;align-items:center;gap:14px}
    .status-bubble{
      width:64px;height:64px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);display:flex;align-items:center;justify-content:center;border:1px solid rgba(255,255,255,0.03)
    }
    .status-dot{
      width:14px;height:14px;border-radius:50%;box-shadow:0 6px 18px rgba(0,0,0,0.5);
    }
    .status-info{display:flex;flex-direction:column}
    .status-info .state{font-weight:800;font-size:1.05rem}
    .status-info .desc{color:var(--muted);font-size:0.95rem;margin-top:4px}

    .stats-text{margin-top:14px;color:var(--muted);line-height:1.45}
    .stats-text strong{color:#fff}

    .mini-actions{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap}

    /* Right column */
    .side{display:flex;flex-direction:column;gap:12px}
    .metric{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03);display:flex;justify-content:space-between;align-items:center;
    }
    .metric .label{color:var(--muted);font-size:0.85rem}
    .metric .value{font-weight:800}

    /* Guild list (horizontal scroll with cards) */
    .guilds-wrap{margin-top:8px;border-radius:12px;padding:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.03);overflow:hidden}
    .guilds{
      display:flex;gap:12px;align-items:center;padding:6px;overflow-x:auto;scrollbar-width:none;-ms-overflow-style:none;
    }
    .guilds::-webkit-scrollbar{display:none}

    .guild-card{
      min-width:220px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:12px;padding:10px;display:flex;gap:10px;align-items:center;border:1px solid rgba(255,255,255,0.02);flex-shrink:0;
      transition:transform .14s ease, box-shadow .14s ease;
    }
    .guild-card:hover{transform:translateY(-6px);box-shadow:0 12px 30px rgba(2,6,23,0.6)}
    .guild-card img{width:48px;height:48px;border-radius:10px;object-fit:cover;background:var(--glass);border:1px solid rgba(255,255,255,0.03)}
    .guild-meta{display:flex;flex-direction:column}
    .guild-name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:140px}
    .guild-members{color:var(--muted);font-size:0.85rem;margin-top:4px;display:flex;gap:8px;align-items:center}

    /* Footer */
    footer{margin-top:16px;display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:0.9rem;flex-wrap:wrap}
    .links a{color:var(--muted);text-decoration:none;margin-right:12px}
    .links a:focus{outline:3px solid rgba(255,75,75,0.12);border-radius:6px}

    /* small helpers */
    .muted{color:var(--muted)}
    .center{display:flex;align-items:center;justify-content:center}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <div class="stage">
    <main class="shell" role="main" aria-labelledby="main-title">
      <header class="header">
        <div class="brand">
          <div class="logo" aria-hidden="true">
            <img src="./logo.png" alt="Punishment logo">
          </div>
          <div class="title-wrap">
            <h1 id="main-title">Punishment</h1>
            <div class="subtitle">Modera√ß√£o avan√ßada com ferramentas intuitivas e confi√°veis.</div>
          </div>
        </div>

        <div class="cta-row" role="region" aria-label="A√ß√µes principais">
          <a class="btn btn-primary" href="https://punbot.xyz/invite" target="_blank" rel="noopener noreferrer">Me Adicione</a>
          <a class="btn btn-outline" href="./docs">Documenta√ß√£o</a>
        </div>
      </header>

      <div class="layout" aria-live="polite">
        <!-- Left -->
        <section class="panel" aria-labelledby="status-heading">
          <div class="status-block">
            <div class="status-bubble" aria-hidden="true">
              <div id="status-dot" class="status-dot" style="background:var(--warn)"></div>
            </div>

            <div class="status-info">
              <div id="status-heading" class="state">Verificando...</div>
              <div id="status-desc" class="desc">Conectando √† API do Punishment</div>
              <div style="margin-top:8px;color:var(--muted);font-size:0.9rem">√öltima atualiza√ß√£o: <span id="last-updated">‚Äî</span></div>
            </div>
          </div>

          <div id="bot-stats" class="stats-text" style="margin-top:16px">Carregando estat√≠sticas...</div>

          <div class="mini-actions">
            <a class="btn btn-outline" href="./support">Suporte</a>
            <a class="btn btn-outline" href="./invite">P√°gina de convite</a>
          </div>
        </section>

        <!-- Right -->
        <aside class="side" aria-labelledby="side-heading">
          <div class="metric" role="status" aria-live="polite">
            <div>
              <div class="label">Status</div>
              <div id="side-status" class="value">Verificando</div>
            </div>
            <div style="text-align:right">
              <div class="label">Servidores</div>
              <div id="side-guilds" class="value">‚Äî</div>
            </div>
          </div>

          <div class="metric">
            <div>
              <div class="label">Usu√°rios alcan√ßados</div>
              <div id="side-users" class="value">‚Äî</div>
            </div>
            <div style="text-align:right">
              <div class="label">Vers√£o API</div>
              <div id="side-api" class="value muted">‚Äî</div>
            </div>
          </div>

          <div class="guilds-wrap" aria-label="Servidores que usam Punishment">
            <div id="guilds" class="guilds" role="list" aria-live="polite">
              <!-- cards injected by JS -->
            </div>
          </div>
        </aside>
      </div>

      <footer>
        <div class="links">
          <a href="./terms">Termos de Uso</a>
          <a href="./privacy">Pol√≠tica de Privacidade</a>
        </div>
        <div class="muted">¬© 2026 Punishment. Todos os direitos reservados.</div>
      </footer>
    </main>
  </div>

  <script>
    (function(){
      const STATUS_URL = 'https://api.punbot.xyz/bot/status';
      const GUILDS_URL = 'https://api.punbot.xyz/bot/guilds';

      const statusDot = document.getElementById('status-dot');
      const statusHeading = document.getElementById('status-heading');
      const statusDesc = document.getElementById('status-desc');
      const lastUpdated = document.getElementById('last-updated');
      const botStats = document.getElementById('bot-stats');

      const sideStatus = document.getElementById('side-status');
      const sideGuilds = document.getElementById('side-guilds');
      const sideUsers = document.getElementById('side-users');
      const sideApi = document.getElementById('side-api');

      const guildsContainer = document.getElementById('guilds');

      function fmtNumber(n){
        return (typeof n === 'number') ? n.toLocaleString('pt-BR') : '‚Äî';
      }

      function safeText(s){
        return String(s || '').replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]; });
      }

      async function loadStatus(){
        try{
          const res = await fetch(STATUS_URL, {cache:'no-store'});
          if (!res.ok) throw new Error('HTTP ' + res.status);
          const data = await res.json();

          const online = Boolean(data.online);
          statusDot.style.background = online ? 'var(--success)' : 'var(--danger)';
          statusHeading.textContent = online ? 'Online' : 'Offline';
          statusDesc.textContent = online ? 'Pronto para modera√ß√£o' : 'Indispon√≠vel no momento';
          sideStatus.textContent = online ? 'Online' : 'Offline';
          sideApi.textContent = data.apiVersion || '‚Äî';

          if (Array.isArray(data.guilds) && typeof data.users === 'number'){
            const totalGuilds = data.guilds.length;
            sideGuilds.textContent = fmtNumber(totalGuilds);
            sideUsers.textContent = fmtNumber(data.users);
            botStats.innerHTML = `O Punishment est√° presente em <strong>${fmtNumber(totalGuilds)}</strong> servidores e alcan√ßa <strong>${fmtNumber(data.users)}</strong> usu√°rios.`;
          } else {
            botStats.textContent = 'Informa√ß√µes de alcance indispon√≠veis no momento.';
          }

          lastUpdated.textContent = new Date().toLocaleTimeString('pt-BR', {hour:'2-digit',minute:'2-digit',second:'2-digit'});
        } catch (err){
          console.warn('Erro ao carregar status', err);
          statusDot.style.background = 'var(--warn)';
          statusHeading.textContent = 'Indispon√≠vel';
          statusDesc.textContent = 'N√£o foi poss√≠vel conectar √† API';
          sideStatus.textContent = 'Indispon√≠vel';
          botStats.textContent = 'N√£o foi poss√≠vel carregar as informa√ß√µes. Tente novamente mais tarde.';
          lastUpdated.textContent = new Date().toLocaleTimeString('pt-BR');
        }
      }

      async function loadGuilds(){
        try{
          const res = await fetch(GUILDS_URL, {cache:'no-store'});
          if (!res.ok) throw new Error('HTTP ' + res.status);
          let guilds = await res.json();

          if (!Array.isArray(guilds) || guilds.length === 0){
            guildsContainer.innerHTML = `<div class="guild-card" role="listitem"><img src="./logo.png" alt="placeholder"><div class="guild-meta"><div class="guild-name">Nenhum servidor dispon√≠vel</div><div class="guild-members muted">‚Äî membros</div></div></div>`;
            return;
          }

          // ensure enough items for smooth horizontal scroll
          while (guilds.length < 10) guilds = guilds.concat(guilds);

          const html = guilds.map(g => {
            const icon = g.icon ? `https://cdn.discordapp.com/icons/${g.id}/${g.icon}.png?size=128` : './logo.png';
            const members = (g.members || 0).toLocaleString('pt-BR');
            const name = safeText(g.name || 'Servidor');
            return `<div class="guild-card" role="listitem" title="${name}"><img src="${icon}" alt="${name} icon" loading="lazy" onerror="this.src='./logo.png'"><div class="guild-meta"><div class="guild-name">${name}</div><div class="guild-members">üë• ${members} membros</div></div></div>`;
          }).join('');

          guildsContainer.innerHTML = html;
        } catch (err){
          console.warn('Erro ao carregar guilds', err);
          guildsContainer.innerHTML = `<div class="guild-card" role="listitem"><img src="./logo.png" alt="placeholder"><div class="guild-meta"><div class="guild-name">Erro ao carregar servidores</div><div class="guild-members muted">Tente novamente mais tarde</div></div></div>`;
        }
      }

      // initial load
      loadStatus();
      loadGuilds();

      // refresh intervals
      setInterval(loadStatus, 10000);   // status a cada 10s
      setInterval(loadGuilds, 300000);  // guilds a cada 5min

      // accessibility: pause scroll on focus/hover (horizontal scroll uses native)
      guildsContainer.addEventListener('mouseenter', () => { guildsContainer.style.scrollBehavior = 'auto'; });
      guildsContainer.addEventListener('mouseleave', () => { guildsContainer.style.scrollBehavior = 'smooth'; });
    })();
  </script>
</body>
</html>
